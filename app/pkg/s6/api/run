#!/command/with-contenv sh
# Start FastAPI application

# Wait for NATS if enabled
if [ "${NATS_ENABLE}" = "true" ]; then
    echo "Waiting for NATS to be ready..."
    sleep 5
fi

echo "Starting StreamOps API..."
cd /opt/streamops
exec uvicorn app.api.main:app \
    --host 0.0.0.0 \
    --port 7767 \
    --workers 1 \
    --log-level ${LOG_LEVEL:-info}